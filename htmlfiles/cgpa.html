<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CGPA Calculator</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: linear-gradient(135deg, #ff7e5f, #feb47b);
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h2 {
      font-size: 2.5em;
      margin: 30px 0;
    }
    button {
      font-size: 1.2em;
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 5px;
      background: #fff;
      color: #333;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    button:hover {
      background: #f0f0f0;
      transform: scale(1.05);
    }
    button:focus {
      outline: none;
    }
    #content {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 10px;
      padding: 20px;
      margin: 20px auto;
      width: 80%;
      max-width: 600px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }
    label {
      display: block;
      font-size: 1.1em;
      margin: 10px 0 5px;
    }
    input {
      font-size: 1em;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      width: calc(100% - 22px);
      box-sizing: border-box;
    }
    #error-message {
      color: red;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h2>CGPA Calculator</h2>
  <button onclick="showYear(1)">1st Year</button>
  <button onclick="showYear(2)">2nd Year</button>
  <button onclick="showYear(3)">3rd Year</button>
  <button onclick="showYear(4)">4th Year</button>
  <button onclick="showYear('overall')">Overall CGPA</button>
  <div id="content"></div>
  <p id="error-message"></p>

  <script>
    function saveData(id, value) {
      localStorage.setItem(id, value);
    }

    function loadData(id) {
      return localStorage.getItem(id) || '';
    }

    function showYear(option) {
      const contentDiv = document.getElementById('content');
      let htmlContent = '';
      
      const generateYearContent = (year, sem1, sem2) => `
        <h3>CGPA Calculator (${year} Year)</h3>
        <label for="${sem1}">SGPA Semester ${year * 2 - 1}:</label>
        <input type="number" id="${sem1}" step="0.01" value="${loadData(sem1)}" oninput="saveData('${sem1}', this.value)"><br>
        <label for="${sem2}">SGPA Semester ${year * 2}:</label>
        <input type="number" id="${sem2}" step="0.01" value="${loadData(sem2)}" oninput="saveData('${sem2}', this.value)"><br>
        <button onclick="calculateCGPA(${year})">Calculate CGPA</button>
        <h3>CGPA: <span id="result_${year}"></span></h3>
      `;

      if (option === 1) htmlContent = generateYearContent(1, 'sgpa1_1', 'sgpa2_1');
      else if (option === 2) htmlContent = generateYearContent(2, 'sgpa1_2', 'sgpa2_2');
      else if (option === 3) htmlContent = generateYearContent(3, 'sgpa1_3', 'sgpa2_3');
      else if (option === 4) htmlContent = generateYearContent(4, 'sgpa1_4', 'sgpa2_4');
      else if (option === 'overall') {
        htmlContent = `
          <h3>Overall CGPA Calculator</h3>
          ${[1, 2, 3, 4].map(y => `
            <label for="cgpa${y}">CGPA for ${y} Year:</label>
            <input type="number" id="cgpa${y}" step="0.01" value="${loadData('cgpa' + y)}" oninput="saveData('cgpa' + y, this.value)"><br>
          `).join('')}
          <button onclick="calculateOverallCGPA()">Calculate Overall CGPA</button>
          <h3>Overall CGPA: <span id="overall_result"></span></h3>
        `;
      }
      
      contentDiv.innerHTML = htmlContent;
      document.getElementById('error-message').innerText = '';
    }

    function calculateCGPA(year) {
      let sgpa1 = parseFloat(document.getElementById(`sgpa1_${year}`).value);
      let sgpa2 = parseFloat(document.getElementById(`sgpa2_${year}`).value);
      const credits = [[22, 24], [20, 27], [25, 23], [25, 8]];
      
      if (isNaN(sgpa1) || isNaN(sgpa2) || sgpa1 < 0 || sgpa1 > 10 || sgpa2 < 0 || sgpa2 > 10) {
        document.getElementById('error-message').innerText = 'Invalid SGPA values. Please enter values between 0 and 10.';
        return;
      }
      
      const [credits1, credits2] = credits[year - 1];
      const cgpa = ((sgpa1 * credits1) + (sgpa2 * credits2)) / (credits1 + credits2);
      document.getElementById(`result_${year}`).innerText = cgpa.toFixed(2);
    }

    function calculateOverallCGPA() {
      let cgpas = [1, 2, 3, 4].map(y => parseFloat(document.getElementById(`cgpa${y}`).value));
      if (cgpas.some(c => isNaN(c) || c < 0 || c > 10)) {
        document.getElementById('error-message').innerText = 'Invalid CGPA values. Please enter values between 0 and 10.';
        return;
      }
      
      const credits = [46, 47, 48, 33];
      const overallCGPA = cgpas.reduce((sum, c, i) => sum + c * credits[i], 0) / credits.reduce((a, b) => a + b);
      document.getElementById('overall_result').innerText = overallCGPA.toFixed(2);
    }
    
    window.onload = () => showYear(1);
  </script>
</body>

</html>

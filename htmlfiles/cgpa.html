<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CGPA Calculator</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .calculator-container {
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .calculator-container:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
    }
    input:focus, select:focus {
      border-color: #3b82f6;
      box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
      outline: none;
    }
    #excel-icon {
      transition: transform 0.2s ease, background-color 0.3s ease;
    }
    #excel-icon:hover {
      transform: scale(1.1);
      background-color: #e5e7eb;
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex items-center justify-center p-4">

  <!-- CALCULATOR -->
  <div class="calculator-container bg-white p-6 rounded-xl border shadow-lg w-full max-w-md">
    <h2 class="text-3xl font-bold text-center mb-6">CGPA Calculator</h2>

    <!-- MODE -->
    <label class="block font-medium mb-2">Select Option</label>
    <select id="mode" onchange="updateSlots()" class="w-full p-3 border rounded-lg mb-4">
      <option value="6">CGPA up to 6th Sem</option>
      <option value="6t">CGPA up to 6th + Post 6th Training</option>
      <option value="7">CGPA up to 7th Sem</option>
      <option value="8">CGPA up to 8th Sem</option>
    </select>

    <!-- BASE INPUTS -->
    <label class="block mb-1">CGPA up to Semester 5</label>
    <input id="cgpa5" type="number" min="0" max="10" step="0.01"
      class="w-full p-3 border rounded mb-4" />

    <label class="block mb-1">SGPA Semester 6</label>
    <input id="sgpa6" type="number" min="0" max="10" step="0.01"
      class="w-full p-3 border rounded mb-4" />

    <!-- OPTIONAL INPUTS -->
    <div id="training-slot" class="hidden">
      <label class="block mb-1">Post Sem 6 Training SGPA</label>
      <input id="training" type="number" min="0" max="10" step="0.01"
        class="w-full p-3 border rounded mb-4" />
    </div>

    <div id="sem7-slot" class="hidden">
      <label class="block mb-1">SGPA Semester 7</label>
      <input id="sgpa7" type="number" min="0" max="10" step="0.01"
        class="w-full p-3 border rounded mb-4" />
    </div>

    <div id="sem8-slot" class="hidden">
      <label class="block mb-1">SGPA Semester 8</label>
      <input id="sgpa8" type="number" min="0" max="10" step="0.01"
        class="w-full p-3 border rounded mb-4" />
    </div>

    <!-- CALCULATE -->
    <button onclick="calculate()"
      class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition">
      Calculate
    </button>

    <!-- RESULT -->
    <h3 class="mt-6 font-medium">
      Updated CGPA: <span id="result" class="font-bold">â€”</span>
    </h3>
    <p id="error" class="text-red-600 mt-3"></p>
  </div>

  <!-- EXCEL FLOATING BUTTON (DESCRIPTION ALWAYS VISIBLE) -->
  <div id="excel-fab" class="fixed bottom-4 right-4 flex items-center gap-2 z-50">
    <a
      href="https://docs.google.com/spreadsheets/d/11qgVDqVmdrMVrBAOrVtgc7WD6aiPBy71/edit?usp=sharing&ouid=102305582136662791803&rtpof=true&sd=true"
      target="_blank"
      id="excel-icon"
      title="Open Semester 5 CGPA Excel"
      class="bg-white text-gray-800 rounded-full p-3 shadow-lg"
    >ðŸ“„</a>

    <!-- ALWAYS VISIBLE -->
    <span class="bg-gray-800 text-white px-2 py-1 rounded-md text-sm">
      CGPA up to Sem5
    </span>
  </div>

  <script>
    function updateSlots() {
      const mode = document.getElementById("mode").value;

      document.getElementById("training-slot").classList.add("hidden");
      document.getElementById("sem7-slot").classList.add("hidden");
      document.getElementById("sem8-slot").classList.add("hidden");

      if (["6t", "7", "8"].includes(mode))
        document.getElementById("training-slot").classList.remove("hidden");

      if (["7", "8"].includes(mode))
        document.getElementById("sem7-slot").classList.remove("hidden");

      if (mode === "8")
        document.getElementById("sem8-slot").classList.remove("hidden");
    }

    function valid(v) {
      return !isNaN(v) && v >= 0 && v <= 10;
    }

    function calculate() {
      const error = document.getElementById("error");
      const result = document.getElementById("result");
      error.textContent = "";
      result.textContent = "â€”";

      let total = 0;
      let credits = 0;

      const cgpa5 = parseFloat(document.getElementById("cgpa5").value);
      const sgpa6 = parseFloat(document.getElementById("sgpa6").value);

      if (!valid(cgpa5) || !valid(sgpa6)) {
        error.textContent = "Enter values between 0 and 10.";
        return;
      }

      total += cgpa5 * 123; credits += 123;
      total += sgpa6 * 23;  credits += 23;

      const mode = document.getElementById("mode").value;

      if (["6t", "7", "8"].includes(mode)) {
        const training = parseFloat(document.getElementById("training").value);
        if (!valid(training)) {
          error.textContent = "Training value must be 0â€“10.";
          return;
        }
        total += training * 3; credits += 3;
      }

      if (["7", "8"].includes(mode)) {
        const sgpa7 = parseFloat(document.getElementById("sgpa7").value);
        if (!valid(sgpa7)) {
          error.textContent = "Semester 7 value must be 0â€“10.";
          return;
        }
        total += sgpa7 * 15; credits += 15;
      }

      if (mode === "8") {
        const sgpa8 = parseFloat(document.getElementById("sgpa8").value);
        if (!valid(sgpa8)) {
          error.textContent = "Semester 8 value must be 0â€“10.";
          return;
        }
        total += sgpa8 * 12; credits += 12;
      }

      result.textContent = (total / credits).toFixed(2);
    }
  </script>

</body>
</html>


